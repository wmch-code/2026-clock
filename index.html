<！doctype 超文本标记语言=
<= 朗="zh-CN">
<头>
    <元 字符集="UTF-8">
    <元 姓名="视口" 内容="宽度=设备宽度，初始比例=1.0，最大比例=1.0，用户可缩放=否">
    <标题>2026 跨年时钟</标题>
    <脚本 src="https://cdn.tailwindcss.com"></脚本>
<! -- 引入类似视频中的无衬线字体 -->
    <链接 href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Serif+SC:wght@500;700&display=swap" rel="样式表">
    <风格>
:根 {
--bg-color：#000000；
--card-bg：#1c1c1e；/*视频中那种深灰色*/
--text-white：#fffff；
--文本-灰色：#8e8e93；
        }

身体 {
背景色：var(--bg-color)；
颜色：var(--text-white)；
字体系列：'inter'，-apple-系统，BlinkMacSystemFont，无衬线；
高度：100VH；
边缘: 0;
溢出: 隐藏的;
显示: 弯曲;
挠曲方向: 柱;
对齐项目: 中心;
justify-content：中心；
-webkit-font-moothing：抗锯齿的；
        }

/*----------------通用动画----------------*/
.淡入{不透明度：0；过渡：不透明度1s缓解；}
.淡入激活 { 不透明度: 1; }
.淡出{不透明度：1；过渡：不透明度0.8s缓解；}
.淡出激活 { 不透明度: 0; 指针事件: 没有一个; }

/*----------------第一阶段：名字输入(保持极简)----------------*/
#级输入 {
Z指数：20；
文本对齐: 中心;
宽度: 85%;
最大宽度：350px；
        }

.最小输入 {
宽度: 100%;
背景: 透明的;
边境: 没有一个;
下边框：2px固体#333；
颜色：#FFF；
字体大小：1.5REM；
填充：10px；
文本对齐: 中心;
概要: 没有一个;
边界半径: 0;
过渡：边框颜色0.3s；
字体粗细: 600;
        }

.最小输入:集中 {
边框底色：#FFF；
        }

.minimal-btn{
上边距：30px；
背景：#FFF；
颜色: #000;
边境: 没有一个;
填充：12px40px；
字体大小：1REM；
字体粗细: 600;
边界半径：30px；
光标: 指针;
过渡：改变0.2s；
        }

.minimal-btn：活跃的{
改变: 规模(0.95);
        }

/*----------------第二阶段：仿视频时钟----------------*/
#舞台定时器 {
显示: 没有一个;
Z指数：10；
宽度: 100%;
文本对齐: 中心;
        }

/* 顶部日期信息 */
.日期信息 {
字体大小：夹紧(0.8REM，3VW，1REM)；
颜色: #888;
底边距：2REM；
字体粗细: 400;
字母间距：0.5px；
        }

/* 时钟容器 */
.钟容器 {
显示: 弯曲;
justify-content：中心；
差距：10px；/*卡片间距*/
            padding: 0 20px;
        }

        /* 单个数字卡片 (仿翻页钟外观) */
        .digit-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: clamp(80px, 26vw, 160px); /* 响应式宽度 */
            height: clamp(80px, 26vw, 160px); /* 正方形 */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .digit-text {
            font-family: 'Inter', sans-serif; /* 选用类似视频的紧凑字体 */
            font-weight: 800; /* 特粗 */
            font-size: clamp(3rem, 12vw, 7rem); /* 巨大字体 */
            line-height: 1;
            color: #e5e5e5; /* 略微柔和的白 */
            letter-spacing: -2px; /* 紧凑字距 */
        }

        /* 底部语录 */
        .quote-text {
            margin-top: 3rem;
            font-size: clamp(0.75rem, 3.5vw, 1rem);
            color: #666;
            font-weight: 400;
            letter-spacing: 1px;
        }

        /* ---------------- 第三阶段：贺诗 (适配优化) ---------------- */
        #stage-poem {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 30;
            background: #000; /* 纯黑背景 */
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .poem-container {
            width: 100%;
            max-width: 600px;
            text-align: center;
            /* 出现动画 */
            animation: slowFadeIn 2s ease-out forwards; 
        }

        @keyframes slowFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .poem-title {
            font-family: 'Noto Serif SC', serif;
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            margin-bottom: 3rem;
            color: #fff;
            font-weight: 700;
            letter-spacing: 2px;
        }

        /* 诗句样式核心：不换行 */
        .poem-line {
            font-family: 'Noto Serif SC', serif;
            /* 核心：动态字体大小，根据视口宽度缩放，保证不换行 */
            font-size: clamp(1rem, 5.5vw, 1.8rem); 
            line-height: 2.2;
            color: #d4d4d4; /* 雅致灰白 */
            
            /* 强制不换行，超出容器会自动缩放字体(由clamp控制)，实在不行才溢出 */
            white-space: nowrap; 
            
            /* 居中 */
            display: block;
            width: 100%;
            text-align: center;
        }

        .highlight-name {
            color: #ff3b30; /* 极简黑白中的一点红 */
            font-weight: bold;
        }
        
        .footer-end {
            margin-top: 3rem;
            font-size: 0.8rem;
            color: #333;
            letter-spacing: 4px;
            text-transform: uppercase;
        }

    </style>
</head>
<body>

    <!-- 1. 输入阶段 -->
    <div id="stage-input" class="fade-enter-active">
        <h2 style="margin-bottom: 30px; font-weight: 400; letter-spacing: 2px; font-size: 1.2rem;">2026 跨年倒计时</h2>
        <input type="text" id="username-input" class="minimal-input" placeholder="请输入您的名字" autocomplete="off">
        <br>
        <button class="minimal-btn" onclick="startSystem()">开始</button>
    </div>

    <!-- 2. 时钟阶段 -->
    <div id="stage-timer" class="fade-enter">
        <!-- 顶部日期 (动态生成) -->
        <div class="date-info" id="date-display">
            2025年12月31日 冬月十二 周三
        </div>

        <div class="clock-container">
            <!-- 时 -->
            <div class="digit-card">
                <div class="digit-text" id="h-val">00</div>
            </div>
            <!-- 分 -->
            <div class="digit-card">
                <div class="digit-text" id="m-val">00</div>
            </div>
            <!-- 秒 -->
            <div class="digit-card">
                <div class="digit-text" id="s-val">00</div>
            </div>
        </div>

        <!-- 底部语录 -->
        <div class="quote-text">
            愿来年春山昂首 我为自己筹谋 不再自苦
        </div>
    </div>

    <!-- 3. 贺诗阶段 -->
    <div id="stage-poem">
        <div class="poem-container" id="poem-content-box">
            <!-- 动态插入 -->
        </div>
    </div>

<script>
    /* =========================================
       配置与状态
       ========================================= */
    const TARGET_YEAR = 2026;
    const BEIJING_OFFSET = 8;
    let userName = "User";
    let timerInterval = null;

    /* =========================================
       1. 系统启动
       ========================================= */
    function startSystem() {
        const input = document.getElementById('username-input');
        const val = input.value.trim();
        if(!val) {
            input.style.borderBottomColor = 'red';
            setTimeout(() => input.style.borderBottomColor = '#333', 500);
            return;
        }
        userName = val;

        // 切换界面
        const stageInput = document.getElementById('stage-input');
        stageInput.classList.remove('fade-enter-active');
        stageInput.classList.add('fade-exit-active');
        
        setTimeout(() => {
            stageInput.style.display = 'none';
            const stageTimer = document.getElementById('stage-timer');
            stageTimer.style.display = 'block';
            setTimeout(() => stageTimer.classList.add('fade-enter-active'), 50);
            
            // 更新顶部日期为当前日期 (模拟视频中的静态/动态日期)
            updateDateDisplay();
            // 启动倒计时
            startCountdown();
        }, 800);
    }

    function updateDateDisplay() {
        const now = new Date(); // 这里简化处理，显示当前日期
        // 为了复刻视频，如果还没到2026，我们尽量显示类似视频的格式
        // 简单模拟农历 (由于纯JS计算农历复杂，这里演示用，实际可接入库)
        const dateStr = `${now.getFullYear()}年${now.getMonth()+1}月${now.getDate()}日`;
        // 简单映射星期
        const weeks = ["周日", "周一", "周二", "周三", "周四", "周五", "周六"];
        const weekStr = weeks[now.getDay()];
        
        // 假设是除夕
        // document.getElementById('date-display').innerText = `2025年12月31日 冬月十二 ${weekStr}`;
        // 实时:
        document.getElementById('date-display').innerText = `${dateStr} 农历腊月(待定) ${weekStr}`;
    }

    /* =========================================
       2. 倒计时逻辑 (含3秒延迟)
       ========================================= */
    function startCountdown() {
        // 立即执行一次
        tick(); 
        timerInterval = setInterval(tick, 1000);
    }

    function tick() {
        const now = new Date();
        const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
        const bjTime = utc + (3600000 * BEIJING_OFFSET);
        
        const targetTime = new Date(`${TARGET_YEAR}-01-01T00:00:00+08:00`).getTime();
        
        // 调试用：让倒计时在5秒后结束，方便查看效果
        // const debugTarget = new Date().getTime() + 5000 + (now.getTimezoneOffset() * 60000) + (3600000 * BEIJING_OFFSET);
        // const diff = debugTarget - bjTime;
        
        const diff = targetTime - bjTime;

        // 倒计时结束逻辑
        if (diff <= 0) {
            clearInterval(timerInterval);
            
            // 1. 强制显示 00 00 00
            updateClock(0, 0, 0);

            // 2. 核心需求：停留3秒 (3000ms)
            setTimeout(() => {
                transitionToPoem();
            }, 3000);
            
            return;
        }

        const h = Math.floor(diff / (1000 * 60 * 60)); // 总小时数
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);

        updateClock(h, m, s);
    }

    function updateClock(h, m, s) {
        // 补零逻辑
        const hStr = h < 10 ? '0' + h : h;
        const mStr = m < 10 ? '0' + m : m;
        const sStr = s < 10 ? '0' + s : s;

        document.getElementById('h-val').innerText = hStr;
        document.getElementById('m-val').innerText = mStr;
        document.getElementById('s-val').innerText = sStr;
    }

    /* =========================================
       3. 贺诗生成与展示
       ========================================= */
    function transitionToPoem() {
        const stageTimer = document.getElementById('stage-timer');
        stageTimer.classList.remove('fade-enter-active');
        stageTimer.classList.add('fade-exit-active');

        // 生成诗
        const poemData = generatePoem(userName);
        renderPoem(poemData);

        setTimeout(() => {
            stageTimer.style.display = 'none';
            document.getElementById('stage-poem').style.display = 'flex';
        }, 800);
    }

    function generatePoem(name) {
        let surname = name.substring(0, 1);
        let givenName = name.substring(1);
        let lastChar = name.slice(-1);

        if(name.length >= 4) {
            surname = name.substring(0, 2);
            givenName = name.substring(2);
        }

        const v1_pool = ["氏庆新年", "家纳千祥", "宅迎鸿福"];
        const v2_pool = ["心启瑞篇", "意绘宏图", "志谱新章"];
        const tail_pool = [
            ["岁月祥和度", "门庭福泽全"],
            ["吉星临宝第", "瑞气满华堂"],
            ["春风苏万物", "福耀九重天"]
        ];
        
        const v1 = v1_pool[Math.floor(Math.random() * v1_pool.length)];
        const v2 = v2_pool[Math.floor(Math.random() * v2_pool.length)];
        const tail = tail_pool[Math.floor(Math.random() * tail_pool.length)];

        // 第一句：何氏庆新年
        const line1 = `<span class="highlight-name">${surname}</span>${v1}`;
        // 第二句：哲心启瑞篇
        const line2 = `<span class="highlight-name">${lastChar}</span>${v2}`;

        return {
            title: `《贺${name}新岁》`,
            lines: [
                `${line1}，${line2}。`,
                `平安随日永，快乐与时延。`,
                `${tail[0]}，${tail[1]}。`
            ]
        };
    }

    function renderPoem(data) {
        const box = document.getElementById('poem-content-box');
        box.innerHTML = ''; // 清空

        // 标题
        const title = document.createElement('div');
        title.className = 'poem-title';
        title.innerText = data.title;
        box.appendChild(title);

        // 诗句
        data.lines.forEach(lineStr => {
            const div = document.createElement('div');
            div.className = 'poem-line';
            div.innerHTML = lineStr;
            box.appendChild(div);
        });

        // 底部
        const footer = document.createElement('div');
        footer.className = 'footer-end';
        footer.innerText = "HAPPY NEW YEAR 2026";
        box.appendChild(footer);
    }
</script>
</body>
</html>
    

        
